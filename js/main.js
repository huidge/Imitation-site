var app = {
  debug: false,
  screenXs: 480,
  screenSm: 768,
  screenMd: 992,
  screenLg: 1100,
  screenXl: 1400,

  init: function () {
    //this.stickyHeader();
    $('.btn--menu').on('click', app.mainNav.init);
    $('.btn--submenu').on('click', app.subNav.click);

    if ($('#map').length) {
      this.map.load();
    }

    if ($('.parallax--fixed').length) {
      app.parallax.init();
    }
    
    if ($('.card--video').length) {
      this.videoHover();
    }
    
    if ($('.nav--sub-menu').length) {
      app.subNav.init();
    }
    
    if ($('.footer-gallery').length) {
      //app.footerGallery.init();
    }
    
    //this.gallery.checkForGallery();
    //detect chrome on IOS
    //if(navigator.userAgent.match('CriOS')) {}
  },
  mainNav: {
    init: function(e) {
      e.preventDefault();
      
      var body = $('body'),
          nav = $('.nav--header');
      
      if (body.hasClass('transition')) return false;
      
      if (body.hasClass('menu-open'))
      {
        app.mainNav.close(body, nav);
      }
      else
      {
        app.mainNav.open(body, nav);
      }
    },
    open: function(body, nav) {
      
      nav.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(e){
      
        body.removeClass('transition transition-in').off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');
      });
      
      body.addClass('menu-open transition transition-in');
    },
    close: function(body, nav) {
      
      nav.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(e){
      
        body.removeClass('transition transition-out').off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');
      });
      
      body.addClass('transition transition-out').removeClass('menu-open');
    }
  },
  subNav: {
    init: function() {
      
      var nav = $('.nav--sub-menu'),
          btnText = nav.find('.selected').text();
      console.log(btnText);
      $('.btn--submenu').text(btnText);
    },
    click: function(e) {
      e.preventDefault();
      
      var body = $('body'),
          nav = $('.nav--sub-menu');
      
      if (body.hasClass('transition')) return false;
      
      if (body.hasClass('submenu-open'))
      {
        app.subNav.close(body, nav);
      }
      else
      {
        app.subNav.open(body, nav);
      }
    },
    open: function(body, nav) {
      
      nav.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(e){
      
        body.removeClass('transition transition-in').off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');
      });
      
      body.addClass('submenu-open transition transition-in');
    },
    close: function(body, nav) {
      
      nav.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(e){
      
        body.removeClass('transition transition-out').off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');
      });
      
      body.addClass('transition transition-out').removeClass('submenu-open');
    }
  },
  videoHover: function () {

    $('.card--video').each(function () {
      
      var elm = $(this),
          video = elm.find('video');
      
      elm.hover(
        function() {
          video.get(0).currentTime = 0;
          video.get(0).play();
        }, function() {
          video.get(0).pause();
        }
      );
    });
  },
  stickyHeader: function () {
    var header = $('.app--header'),
    headerH = header.height();

    $(window).scroll(function () {
      var scroll = $(window).scrollTop();

      if (scroll >= headerH) {
        header.addClass('fixed');
      }
      else {
        header.removeClass('fixed');
      }
    });
  },
  resize: function () {

    // screenXl
    if (app.utils.viewPortW() >= app.screenXl) {
      //app.parallax.init('large');
      app.responsiveBgd('large');
      $('body').attr('data-device', 'large');

    }
    else if (app.utils.viewPortW() < app.screenXl && app.utils.viewPortW() >= app.screenMd) {
      //app.parallax.init('medium');
      app.responsiveBgd('medium');
      $('body').attr('data-device', 'medium');

    }
    else if (app.utils.viewPortW() < app.screenMd) {
      //app.parallax.init('small');
      app.responsiveBgd('small');
      $('body').attr('data-device', 'small');

    }

    // remove menu open from mobile to desktop
    if (app.utils.viewPortW() > app.screenSm && $('body').hasClass('menu-open')) {
      
      $('body').removeClass('menu-open');
    }
    
  },
  letterFadeIn: {
    init: function () {

      if ($('.tmpl-home').length) {
        var string = $('.title-content-fad-in').html().split('');
        var elem = $('.section--hero .wrap--text h1');

        if (app.utils.viewPortW() >= app.screenSm) {
          this.start(elem, string);
        } else {
          elem.html(string);
        }
      }

    },
    start: function (elem, string) {

      var c = 0;
      var i = setInterval(function () {
        if (c >= string.length) {
          clearInterval(i);
          elem.html(string);
        } else {
          $('<span>').text(string[c]).appendTo(elem).hide().fadeIn(10);
          c += 1;
        }
      }, 100);
    }
  },
  map: {
    load: function () {

      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyDm1sGzixu6SocdEwk60iBjad9OCMtLl-Y&callback=app.map.init';

      $('body').append(script);
    },
    init: function () {
      var myCenterPosition = {lat: 51.447866, lng: -0.198903};

      var map = new google.maps.Map(document.getElementById('map'), {
        center: myCenterPosition,
        scrollwheel: false,
        zoom: 18
      });

      if (!location.origin) {
        location.origin = location.protocol + "//" + location.host;
      }
      var iconMarker = location.origin + '/images/map-marker.png';

      var marker = new google.maps.Marker({
        position: myCenterPosition,
        map: map,
        icon: iconMarker
      });
    }
  },
  responsiveBgd: function (size) {

    var device = $('body').attr('data-device');

    if (device == size) return false;

    $('.rsp-bgd').each(function () {

      var elm = $(this),
      img = elm.data('src-' + size + '');

      // defaults to medium if no image
      if (img === '' || img === undefined) {
        img = elm.data('src-medium');
      }

      elm.css({'background-image': 'url(' + img + ')'});
    });

  },
  parallax: {
    init: function (size) {
      
      $('.section--hero + section').waypoint({
        offset: '0%',
        handler: function (direction) {

          var hero = $('.section--hero');

          if (direction === 'down') {
            hero.removeClass('visible');
          }
          else {
            hero.addClass('visible');
          }
        }
      });
      
      if ($('.tmpl-home').length) {
        app.parallax.buildHome();
      }
    },
    buildHome: function () {
      
      var is_iPad = navigator.userAgent.match(/iPad/i) !== null;
      
      if (is_iPad) return false;
      
      $('#app-root').addClass('plugin-aos');
      
      AOS.init({
        disable: window.innerWidth < app.screenMd
      });
    }
  },
  footerGallery: {
    init: function () {
      
      $('.footer-gallery').isotope({
        itemSelector: '.block--image',
        layoutMode: 'packery'
      });
      //this.$footerGallery.isotope('layout');
    }
  },
  gallery: {
    //check for any gallery by class name, init each one and call check filters
    checkForGallery: function () {

      var hasGallery = false;             //create gallery flag

      if ($('.main-gallery').length) {    //check if there is main gallery
        //this.initMainGallery();           //call init main gallery
        //hasGallery = true;                //set gallery flag true
      }

      if ($('.footer-gallery').length) {  //check if there is footer gallery
        this.initFooterGallery();         //call init footer gallery
        hasGallery = true;                //set gallery flag true
      }

      if (hasGallery) {
        this.checkForFilters();           //if there is any gallery check for filters
      }
    },

    //init main gallery
    initMainGallery: function () {
      this.$mainGallery = $('.main-gallery').isotope({
        itemSelector: '.wrap--column'
      });
      this.$mainGallery.isotope('layout');
    },

    //init footer gallery
    initFooterGallery: function () {
      this.$footerGallery = $('.footer-gallery').isotope({
        itemSelector: '.block--image'
      });
      //this.$footerGallery.isotope('layout');
    },

    //check for filters by class name
    checkForFilters: function () {
      var _this = this;
      $('.btn--category').on('click', function (e) {
        $(e.currentTarget).siblings().removeClass('selected');
        $(e.currentTarget).addClass('selected');

        e.preventDefault();

        var filterValue = '.' + $(this).attr('data-category');

        if (filterValue === '.*') {
          filterValue = '*';
        }

        if (_this.$mainGallery) {
          _this.$mainGallery.isotope({filter: filterValue});
        }

        if (app.utils.viewPortW() >= app.screenSm) {
          _this.$footerGallery.isotope({filter: filterValue});
        }

        // // get filtered elements and remove class hidden
        // var filteredElems = $grid.isotope('getFilteredItemElements');
        // $(filteredElems).removeClass('hidden');

        // //hide load more button on filtered mode
        // $(".btn--load").hide();
      });
    }
  },
  utils: {
    log: function (what) {
      if (app.debug) {
        console.log(what);
      }
    },
    exists: function (el) {
      if ($(el).length > 0) {
        return true;
      }
    },
    viewPortW: function () {
      return document.documentElement.clientWidth < window.innerWidth ? window.innerWidth : document.documentElement.clientWidth;
    }
  }

} || {};

;(function ($, window, undefined) {
  'use strict';

  $(document).ready(function () {
    app.init();
  });

  $(window).resize(function () {
    app.resize();
  }).resize();

})(jQuery, this);
//# sourceMappingURL=data:application/json;base64,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QUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQzdGLE1BQU0sRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxNQUFNLEdBQUc7QUFDcEMsTUFBTSxHQUFHLENBQUMsYUFBYSxFQUFFLE1BQU0sR0FBRztBQUNsQyxNQUFNLEdBQUcsSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLEdBQUc7QUFDOUM7QUFDQSxJQUFJLENBQUM7QUFDTCxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNwRCxNQUFNLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHO0FBQ25DLE1BQU0sR0FBRyxDQUFDLGFBQWEsRUFBRSxLQUFLLEdBQUc7QUFDakMsTUFBTSxHQUFHLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHO0FBQzdDO0FBQ0EsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPO0FBQzlDLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUcsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FB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QUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUM7QUFDakksSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUc7QUFDUjtBQUNBLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQ25DLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO0FBQ2Y7QUFDQSxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakMsSUFBSSxHQUFHLENBQUMsSUFBSSxHQUFHO0FBQ2YsRUFBRSxHQUFHO0FBQ0w7QUFDQSxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDaEMsSUFBSSxHQUFHLENBQUMsTUFBTSxHQUFHO0FBQ2pCLEVBQUUsR0FBRyxNQUFNLEdBQUc7QUFDZDtBQUNBLEdBQUcsTUFBTSxDQUFDLENBQUMsSUFBSSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IHtcbiAgZGVidWc6IGZhbHNlLFxuICBzY3JlZW5YczogNDgwLFxuICBzY3JlZW5TbTogNzY4LFxuICBzY3JlZW5NZDogOTkyLFxuICBzY3JlZW5MZzogMTEwMCxcbiAgc2NyZWVuWGw6IDE0MDAsXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIC8vdGhpcy5zdGlja3lIZWFkZXIoKTtcbiAgICAkKCcuYnRuLS1tZW51Jykub24oJ2NsaWNrJywgYXBwLm1haW5OYXYuaW5pdCk7XG4gICAgJCgnLmJ0bi0tc3VibWVudScpLm9uKCdjbGljaycsIGFwcC5zdWJOYXYuY2xpY2spO1xuXG4gICAgaWYgKCQoJyNtYXAnKS5sZW5ndGgpIHtcbiAgICAgIHRoaXMubWFwLmxvYWQoKTtcbiAgICB9XG5cbiAgICBpZiAoJCgnLnBhcmFsbGF4LS1maXhlZCcpLmxlbmd0aCkge1xuICAgICAgYXBwLnBhcmFsbGF4LmluaXQoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCQoJy5jYXJkLS12aWRlbycpLmxlbmd0aCkge1xuICAgICAgdGhpcy52aWRlb0hvdmVyKCk7XG4gICAgfVxuICAgIFxuICAgIGlmICgkKCcubmF2LS1zdWItbWVudScpLmxlbmd0aCkge1xuICAgICAgYXBwLnN1Yk5hdi5pbml0KCk7XG4gICAgfVxuICAgIFxuICAgIGlmICgkKCcuZm9vdGVyLWdhbGxlcnknKS5sZW5ndGgpIHtcbiAgICAgIC8vYXBwLmZvb3RlckdhbGxlcnkuaW5pdCgpO1xuICAgIH1cbiAgICBcbiAgICAvL3RoaXMuZ2FsbGVyeS5jaGVja0ZvckdhbGxlcnkoKTtcbiAgICAvL2RldGVjdCBjaHJvbWUgb24gSU9TXG4gICAgLy9pZihuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdDcmlPUycpKSB7fVxuICB9LFxuICBtYWluTmF2OiB7XG4gICAgaW5pdDogZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgXG4gICAgICB2YXIgYm9keSA9ICQoJ2JvZHknKSxcbiAgICAgICAgICBuYXYgPSAkKCcubmF2LS1oZWFkZXInKTtcbiAgICAgIFxuICAgICAgaWYgKGJvZHkuaGFzQ2xhc3MoJ3RyYW5zaXRpb24nKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgXG4gICAgICBpZiAoYm9keS5oYXNDbGFzcygnbWVudS1vcGVuJykpXG4gICAgICB7XG4gICAgICAgIGFwcC5tYWluTmF2LmNsb3NlKGJvZHksIG5hdik7XG4gICAgICB9XG4gICAgICBlbHNlXG4gICAgICB7XG4gICAgICAgIGFwcC5tYWluTmF2Lm9wZW4oYm9keSwgbmF2KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9wZW46IGZ1bmN0aW9uKGJvZHksIG5hdikge1xuICAgICAgXG4gICAgICBuYXYub24oJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbihlKXtcbiAgICAgIFxuICAgICAgICBib2R5LnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uIHRyYW5zaXRpb24taW4nKS5vZmYoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBib2R5LmFkZENsYXNzKCdtZW51LW9wZW4gdHJhbnNpdGlvbiB0cmFuc2l0aW9uLWluJyk7XG4gICAgfSxcbiAgICBjbG9zZTogZnVuY3Rpb24oYm9keSwgbmF2KSB7XG4gICAgICBcbiAgICAgIG5hdi5vbigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKGUpe1xuICAgICAgXG4gICAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24gdHJhbnNpdGlvbi1vdXQnKS5vZmYoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBib2R5LmFkZENsYXNzKCd0cmFuc2l0aW9uIHRyYW5zaXRpb24tb3V0JykucmVtb3ZlQ2xhc3MoJ21lbnUtb3BlbicpO1xuICAgIH1cbiAgfSxcbiAgc3ViTmF2OiB7XG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICBcbiAgICAgIHZhciBuYXYgPSAkKCcubmF2LS1zdWItbWVudScpLFxuICAgICAgICAgIGJ0blRleHQgPSBuYXYuZmluZCgnLnNlbGVjdGVkJykudGV4dCgpO1xuICAgICAgY29uc29sZS5sb2coYnRuVGV4dCk7XG4gICAgICAkKCcuYnRuLS1zdWJtZW51JykudGV4dChidG5UZXh0KTtcbiAgICB9LFxuICAgIGNsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBcbiAgICAgIHZhciBib2R5ID0gJCgnYm9keScpLFxuICAgICAgICAgIG5hdiA9ICQoJy5uYXYtLXN1Yi1tZW51Jyk7XG4gICAgICBcbiAgICAgIGlmIChib2R5Lmhhc0NsYXNzKCd0cmFuc2l0aW9uJykpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgaWYgKGJvZHkuaGFzQ2xhc3MoJ3N1Ym1lbnUtb3BlbicpKVxuICAgICAge1xuICAgICAgICBhcHAuc3ViTmF2LmNsb3NlKGJvZHksIG5hdik7XG4gICAgICB9XG4gICAgICBlbHNlXG4gICAgICB7XG4gICAgICAgIGFwcC5zdWJOYXYub3Blbihib2R5LCBuYXYpO1xuICAgICAgfVxuICAgIH0sXG4gICAgb3BlbjogZnVuY3Rpb24oYm9keSwgbmF2KSB7XG4gICAgICBcbiAgICAgIG5hdi5vbigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKGUpe1xuICAgICAgXG4gICAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24gdHJhbnNpdGlvbi1pbicpLm9mZigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGJvZHkuYWRkQ2xhc3MoJ3N1Ym1lbnUtb3BlbiB0cmFuc2l0aW9uIHRyYW5zaXRpb24taW4nKTtcbiAgICB9LFxuICAgIGNsb3NlOiBmdW5jdGlvbihib2R5LCBuYXYpIHtcbiAgICAgIFxuICAgICAgbmF2Lm9uKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24oZSl7XG4gICAgICBcbiAgICAgICAgYm9keS5yZW1vdmVDbGFzcygndHJhbnNpdGlvbiB0cmFuc2l0aW9uLW91dCcpLm9mZigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGJvZHkuYWRkQ2xhc3MoJ3RyYW5zaXRpb24gdHJhbnNpdGlvbi1vdXQnKS5yZW1vdmVDbGFzcygnc3VibWVudS1vcGVuJyk7XG4gICAgfVxuICB9LFxuICB2aWRlb0hvdmVyOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAkKCcuY2FyZC0tdmlkZW8nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIFxuICAgICAgdmFyIGVsbSA9ICQodGhpcyksXG4gICAgICAgICAgdmlkZW8gPSBlbG0uZmluZCgndmlkZW8nKTtcbiAgICAgIFxuICAgICAgZWxtLmhvdmVyKFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2aWRlby5nZXQoMCkuY3VycmVudFRpbWUgPSAwO1xuICAgICAgICAgIHZpZGVvLmdldCgwKS5wbGF5KCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZpZGVvLmdldCgwKS5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICB9LFxuICBzdGlja3lIZWFkZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGVhZGVyID0gJCgnLmFwcC0taGVhZGVyJyksXG4gICAgaGVhZGVySCA9IGhlYWRlci5oZWlnaHQoKTtcblxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuICAgICAgaWYgKHNjcm9sbCA+PSBoZWFkZXJIKSB7XG4gICAgICAgIGhlYWRlci5hZGRDbGFzcygnZml4ZWQnKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBoZWFkZXIucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gc2NyZWVuWGxcbiAgICBpZiAoYXBwLnV0aWxzLnZpZXdQb3J0VygpID49IGFwcC5zY3JlZW5YbCkge1xuICAgICAgLy9hcHAucGFyYWxsYXguaW5pdCgnbGFyZ2UnKTtcbiAgICAgIGFwcC5yZXNwb25zaXZlQmdkKCdsYXJnZScpO1xuICAgICAgJCgnYm9keScpLmF0dHIoJ2RhdGEtZGV2aWNlJywgJ2xhcmdlJyk7XG5cbiAgICB9XG4gICAgZWxzZSBpZiAoYXBwLnV0aWxzLnZpZXdQb3J0VygpIDwgYXBwLnNjcmVlblhsICYmIGFwcC51dGlscy52aWV3UG9ydFcoKSA+PSBhcHAuc2NyZWVuTWQpIHtcbiAgICAgIC8vYXBwLnBhcmFsbGF4LmluaXQoJ21lZGl1bScpO1xuICAgICAgYXBwLnJlc3BvbnNpdmVCZ2QoJ21lZGl1bScpO1xuICAgICAgJCgnYm9keScpLmF0dHIoJ2RhdGEtZGV2aWNlJywgJ21lZGl1bScpO1xuXG4gICAgfVxuICAgIGVsc2UgaWYgKGFwcC51dGlscy52aWV3UG9ydFcoKSA8IGFwcC5zY3JlZW5NZCkge1xuICAgICAgLy9hcHAucGFyYWxsYXguaW5pdCgnc21hbGwnKTtcbiAgICAgIGFwcC5yZXNwb25zaXZlQmdkKCdzbWFsbCcpO1xuICAgICAgJCgnYm9keScpLmF0dHIoJ2RhdGEtZGV2aWNlJywgJ3NtYWxsJyk7XG5cbiAgICB9XG5cbiAgICAvLyByZW1vdmUgbWVudSBvcGVuIGZyb20gbW9iaWxlIHRvIGRlc2t0b3BcbiAgICBpZiAoYXBwLnV0aWxzLnZpZXdQb3J0VygpID4gYXBwLnNjcmVlblNtICYmICQoJ2JvZHknKS5oYXNDbGFzcygnbWVudS1vcGVuJykpIHtcbiAgICAgIFxuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtZW51LW9wZW4nKTtcbiAgICB9XG4gICAgXG4gIH0sXG4gIGxldHRlckZhZGVJbjoge1xuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgaWYgKCQoJy50bXBsLWhvbWUnKS5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHN0cmluZyA9ICQoJy50aXRsZS1jb250ZW50LWZhZC1pbicpLmh0bWwoKS5zcGxpdCgnJyk7XG4gICAgICAgIHZhciBlbGVtID0gJCgnLnNlY3Rpb24tLWhlcm8gLndyYXAtLXRleHQgaDEnKTtcblxuICAgICAgICBpZiAoYXBwLnV0aWxzLnZpZXdQb3J0VygpID49IGFwcC5zY3JlZW5TbSkge1xuICAgICAgICAgIHRoaXMuc3RhcnQoZWxlbSwgc3RyaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtLmh0bWwoc3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSxcbiAgICBzdGFydDogZnVuY3Rpb24gKGVsZW0sIHN0cmluZykge1xuXG4gICAgICB2YXIgYyA9IDA7XG4gICAgICB2YXIgaSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGMgPj0gc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaSk7XG4gICAgICAgICAgZWxlbS5odG1sKHN0cmluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnPHNwYW4+JykudGV4dChzdHJpbmdbY10pLmFwcGVuZFRvKGVsZW0pLmhpZGUoKS5mYWRlSW4oMTApO1xuICAgICAgICAgIGMgKz0gMTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9XG4gIH0sXG4gIG1hcDoge1xuICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1BSXphU3lEbTFzR3ppeHU2U29jZEV3azYwaUJqYWQ5T0NNdExsLVkmY2FsbGJhY2s9YXBwLm1hcC5pbml0JztcblxuICAgICAgJCgnYm9keScpLmFwcGVuZChzY3JpcHQpO1xuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG15Q2VudGVyUG9zaXRpb24gPSB7bGF0OiA1MS40NDc4NjYsIGxuZzogLTAuMTk4OTAzfTtcblxuICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIGNlbnRlcjogbXlDZW50ZXJQb3NpdGlvbixcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICB6b29tOiAxOFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgIGxvY2F0aW9uLm9yaWdpbiA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgICAgIH1cbiAgICAgIHZhciBpY29uTWFya2VyID0gbG9jYXRpb24ub3JpZ2luICsgJy9pbWFnZXMvbWFwLW1hcmtlci5wbmcnO1xuXG4gICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgIHBvc2l0aW9uOiBteUNlbnRlclBvc2l0aW9uLFxuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgaWNvbjogaWNvbk1hcmtlclxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICByZXNwb25zaXZlQmdkOiBmdW5jdGlvbiAoc2l6ZSkge1xuXG4gICAgdmFyIGRldmljZSA9ICQoJ2JvZHknKS5hdHRyKCdkYXRhLWRldmljZScpO1xuXG4gICAgaWYgKGRldmljZSA9PSBzaXplKSByZXR1cm4gZmFsc2U7XG5cbiAgICAkKCcucnNwLWJnZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgZWxtID0gJCh0aGlzKSxcbiAgICAgIGltZyA9IGVsbS5kYXRhKCdzcmMtJyArIHNpemUgKyAnJyk7XG5cbiAgICAgIC8vIGRlZmF1bHRzIHRvIG1lZGl1bSBpZiBubyBpbWFnZVxuICAgICAgaWYgKGltZyA9PT0gJycgfHwgaW1nID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW1nID0gZWxtLmRhdGEoJ3NyYy1tZWRpdW0nKTtcbiAgICAgIH1cblxuICAgICAgZWxtLmNzcyh7J2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCcgKyBpbWcgKyAnKSd9KTtcbiAgICB9KTtcblxuICB9LFxuICBwYXJhbGxheDoge1xuICAgIGluaXQ6IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICBcbiAgICAgICQoJy5zZWN0aW9uLS1oZXJvICsgc2VjdGlvbicpLndheXBvaW50KHtcbiAgICAgICAgb2Zmc2V0OiAnMCUnLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG5cbiAgICAgICAgICB2YXIgaGVybyA9ICQoJy5zZWN0aW9uLS1oZXJvJyk7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnZG93bicpIHtcbiAgICAgICAgICAgIGhlcm8ucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoZXJvLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCQoJy50bXBsLWhvbWUnKS5sZW5ndGgpIHtcbiAgICAgICAgYXBwLnBhcmFsbGF4LmJ1aWxkSG9tZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYnVpbGRIb21lOiBmdW5jdGlvbiAoKSB7XG4gICAgICBcbiAgICAgIHZhciBpc19pUGFkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSAhPT0gbnVsbDtcbiAgICAgIFxuICAgICAgaWYgKGlzX2lQYWQpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgJCgnI2FwcC1yb290JykuYWRkQ2xhc3MoJ3BsdWdpbi1hb3MnKTtcbiAgICAgIFxuICAgICAgQU9TLmluaXQoe1xuICAgICAgICBkaXNhYmxlOiB3aW5kb3cuaW5uZXJXaWR0aCA8IGFwcC5zY3JlZW5NZFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBmb290ZXJHYWxsZXJ5OiB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgXG4gICAgICAkKCcuZm9vdGVyLWdhbGxlcnknKS5pc290b3BlKHtcbiAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmJsb2NrLS1pbWFnZScsXG4gICAgICAgIGxheW91dE1vZGU6ICdwYWNrZXJ5J1xuICAgICAgfSk7XG4gICAgICAvL3RoaXMuJGZvb3RlckdhbGxlcnkuaXNvdG9wZSgnbGF5b3V0Jyk7XG4gICAgfVxuICB9LFxuICBnYWxsZXJ5OiB7XG4gICAgLy9jaGVjayBmb3IgYW55IGdhbGxlcnkgYnkgY2xhc3MgbmFtZSwgaW5pdCBlYWNoIG9uZSBhbmQgY2FsbCBjaGVjayBmaWx0ZXJzXG4gICAgY2hlY2tGb3JHYWxsZXJ5OiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIHZhciBoYXNHYWxsZXJ5ID0gZmFsc2U7ICAgICAgICAgICAgIC8vY3JlYXRlIGdhbGxlcnkgZmxhZ1xuXG4gICAgICBpZiAoJCgnLm1haW4tZ2FsbGVyeScpLmxlbmd0aCkgeyAgICAvL2NoZWNrIGlmIHRoZXJlIGlzIG1haW4gZ2FsbGVyeVxuICAgICAgICAvL3RoaXMuaW5pdE1haW5HYWxsZXJ5KCk7ICAgICAgICAgICAvL2NhbGwgaW5pdCBtYWluIGdhbGxlcnlcbiAgICAgICAgLy9oYXNHYWxsZXJ5ID0gdHJ1ZTsgICAgICAgICAgICAgICAgLy9zZXQgZ2FsbGVyeSBmbGFnIHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCQoJy5mb290ZXItZ2FsbGVyeScpLmxlbmd0aCkgeyAgLy9jaGVjayBpZiB0aGVyZSBpcyBmb290ZXIgZ2FsbGVyeVxuICAgICAgICB0aGlzLmluaXRGb290ZXJHYWxsZXJ5KCk7ICAgICAgICAgLy9jYWxsIGluaXQgZm9vdGVyIGdhbGxlcnlcbiAgICAgICAgaGFzR2FsbGVyeSA9IHRydWU7ICAgICAgICAgICAgICAgIC8vc2V0IGdhbGxlcnkgZmxhZyB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNHYWxsZXJ5KSB7XG4gICAgICAgIHRoaXMuY2hlY2tGb3JGaWx0ZXJzKCk7ICAgICAgICAgICAvL2lmIHRoZXJlIGlzIGFueSBnYWxsZXJ5IGNoZWNrIGZvciBmaWx0ZXJzXG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vaW5pdCBtYWluIGdhbGxlcnlcbiAgICBpbml0TWFpbkdhbGxlcnk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJG1haW5HYWxsZXJ5ID0gJCgnLm1haW4tZ2FsbGVyeScpLmlzb3RvcGUoe1xuICAgICAgICBpdGVtU2VsZWN0b3I6ICcud3JhcC0tY29sdW1uJ1xuICAgICAgfSk7XG4gICAgICB0aGlzLiRtYWluR2FsbGVyeS5pc290b3BlKCdsYXlvdXQnKTtcbiAgICB9LFxuXG4gICAgLy9pbml0IGZvb3RlciBnYWxsZXJ5XG4gICAgaW5pdEZvb3RlckdhbGxlcnk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGZvb3RlckdhbGxlcnkgPSAkKCcuZm9vdGVyLWdhbGxlcnknKS5pc290b3BlKHtcbiAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmJsb2NrLS1pbWFnZSdcbiAgICAgIH0pO1xuICAgICAgLy90aGlzLiRmb290ZXJHYWxsZXJ5Lmlzb3RvcGUoJ2xheW91dCcpO1xuICAgIH0sXG5cbiAgICAvL2NoZWNrIGZvciBmaWx0ZXJzIGJ5IGNsYXNzIG5hbWVcbiAgICBjaGVja0ZvckZpbHRlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAkKCcuYnRuLS1jYXRlZ29yeScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBmaWx0ZXJWYWx1ZSA9ICcuJyArICQodGhpcykuYXR0cignZGF0YS1jYXRlZ29yeScpO1xuXG4gICAgICAgIGlmIChmaWx0ZXJWYWx1ZSA9PT0gJy4qJykge1xuICAgICAgICAgIGZpbHRlclZhbHVlID0gJyonO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF90aGlzLiRtYWluR2FsbGVyeSkge1xuICAgICAgICAgIF90aGlzLiRtYWluR2FsbGVyeS5pc290b3BlKHtmaWx0ZXI6IGZpbHRlclZhbHVlfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXBwLnV0aWxzLnZpZXdQb3J0VygpID49IGFwcC5zY3JlZW5TbSkge1xuICAgICAgICAgIF90aGlzLiRmb290ZXJHYWxsZXJ5Lmlzb3RvcGUoe2ZpbHRlcjogZmlsdGVyVmFsdWV9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC8vIGdldCBmaWx0ZXJlZCBlbGVtZW50cyBhbmQgcmVtb3ZlIGNsYXNzIGhpZGRlblxuICAgICAgICAvLyB2YXIgZmlsdGVyZWRFbGVtcyA9ICRncmlkLmlzb3RvcGUoJ2dldEZpbHRlcmVkSXRlbUVsZW1lbnRzJyk7XG4gICAgICAgIC8vICQoZmlsdGVyZWRFbGVtcykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICAgIC8vIC8vaGlkZSBsb2FkIG1vcmUgYnV0dG9uIG9uIGZpbHRlcmVkIG1vZGVcbiAgICAgICAgLy8gJChcIi5idG4tLWxvYWRcIikuaGlkZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICB1dGlsczoge1xuICAgIGxvZzogZnVuY3Rpb24gKHdoYXQpIHtcbiAgICAgIGlmIChhcHAuZGVidWcpIHtcbiAgICAgICAgY29uc29sZS5sb2cod2hhdCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBleGlzdHM6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgaWYgKCQoZWwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICB2aWV3UG9ydFc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPCB3aW5kb3cuaW5uZXJXaWR0aCA/IHdpbmRvdy5pbm5lcldpZHRoIDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgIH1cbiAgfVxuXG59IHx8IHt9O1xuXG47KGZ1bmN0aW9uICgkLCB3aW5kb3csIHVuZGVmaW5lZCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7XG4gIH0pO1xuXG4gICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgIGFwcC5yZXNpemUoKTtcbiAgfSkucmVzaXplKCk7XG5cbn0pKGpRdWVyeSwgdGhpcyk7Il19